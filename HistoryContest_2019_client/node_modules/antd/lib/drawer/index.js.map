{"version":3,"sources":["drawer/index.jsx"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","DrawerContext","PlacementTypes","Drawer","arguments","state","push","setState","pull","onDestroyTransitionEnd","isDestroyOnClose","getDestroyOnClose","props","visible","destroyClose","forceUpdate","destroyOnClose","getPushTransform","placement","getRcDrawerStyle","zIndex","style","transform","undefined","renderBody","bodyStyle","prefixCls","containerStyle","overflow","height","opacity","transition","renderHeader","children","renderProvider","value","_a","className","wrapClassName","width","closable","mask","title","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","autoInsertSpaceInButton","rest","haveMask","parentDrawer","offsetStyle","preProps","headerClassName","renderCloseIcon","onClose","React","Component","defaultProps","maskClosable","level","keyboard"],"mappings":";;;;;;;AAWA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AAlBA,IAAIA,MAAM,GAAI,UAAQ,SAAKA,MAAd,IAAyB,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAClD,MAAIC,CAAC,GAAG,EAAR;;AACA,OAAK,IAAIC,CAAT,IAAcH,CAAd;AAAiB,QAAII,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCP,CAArC,EAAwCG,CAAxC,KAA8CF,CAAC,CAACO,OAAF,CAAUL,CAAV,IAAe,CAAjE,EACbD,CAAC,CAACC,CAAD,CAAD,GAAOH,CAAC,CAACG,CAAD,CAAR;AADJ;;AAEA,MAAIH,CAAC,IAAI,IAAL,IAAa,OAAOI,MAAM,CAACK,qBAAd,KAAwC,UAAzD,EACI,KAAK,IAAIC,CAAC,GAAG,CAAR,EAAWP,CAAC,GAAGC,MAAM,CAACK,qBAAP,CAA6BT,CAA7B,CAApB,EAAqDU,CAAC,GAAGP,CAAC,CAACQ,MAA3D,EAAmED,CAAC,EAApE,EAAwE;AACpE,QAAIT,CAAC,CAACO,OAAF,CAAUL,CAAC,CAACO,CAAD,CAAX,IAAkB,CAAlB,IAAuBN,MAAM,CAACC,SAAP,CAAiBO,oBAAjB,CAAsCL,IAAtC,CAA2CP,CAA3C,EAA8CG,CAAC,CAACO,CAAD,CAA/C,CAA3B,EACIR,CAAC,CAACC,CAAC,CAACO,CAAD,CAAF,CAAD,GAAUV,CAAC,CAACG,CAAC,CAACO,CAAD,CAAF,CAAX;AACP;AACL,SAAOR,CAAP;AACH,CAVD;;AAmBA,IAAMW,aAAa,GAAG,oCAAmB,IAAnB,CAAtB;AACA,IAAMC,cAAc,GAAG,iBAAM,KAAN,EAAa,OAAb,EAAsB,QAAtB,EAAgC,MAAhC,CAAvB;;IACMC,M;;;;;AACF,oBAAc;AAAA;;AAAA;;AACV,iFAASC,SAAT;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,IAAI,EAAE;AADG,KAAb;;AAGA,UAAKA,IAAL,GAAY,YAAM;AACd,YAAKC,QAAL,CAAc;AACVD,QAAAA,IAAI,EAAE;AADI,OAAd;AAGH,KAJD;;AAKA,UAAKE,IAAL,GAAY,YAAM;AACd,YAAKD,QAAL,CAAc;AACVD,QAAAA,IAAI,EAAE;AADI,OAAd;AAGH,KAJD;;AAKA,UAAKG,sBAAL,GAA8B,YAAM;AAChC,UAAMC,gBAAgB,GAAG,MAAKC,iBAAL,EAAzB;;AACA,UAAI,CAACD,gBAAL,EAAuB;AACnB;AACH;;AACD,UAAI,CAAC,MAAKE,KAAL,CAAWC,OAAhB,EAAyB;AACrB,cAAKC,YAAL,GAAoB,IAApB;;AACA,cAAKC,WAAL;AACH;AACJ,KATD;;AAUA,UAAKJ,iBAAL,GAAyB;AAAA,aAAM,MAAKC,KAAL,CAAWI,cAAX,IAA6B,CAAC,MAAKJ,KAAL,CAAWC,OAA/C;AAAA,KAAzB,CAzBU,CA0BV;;;AACA,UAAKI,gBAAL,GAAwB,UAACC,SAAD,EAAe;AACnC,UAAIA,SAAS,KAAK,MAAd,IAAwBA,SAAS,KAAK,OAA1C,EAAmD;AAC/C,oCAAqBA,SAAS,KAAK,MAAd,GAAuB,GAAvB,GAA6B,CAAC,GAAnD;AACH;;AACD,UAAIA,SAAS,KAAK,KAAd,IAAuBA,SAAS,KAAK,QAAzC,EAAmD;AAC/C,oCAAqBA,SAAS,KAAK,KAAd,GAAsB,GAAtB,GAA4B,CAAC,GAAlD;AACH;AACJ,KAPD;;AAQA,UAAKC,gBAAL,GAAwB,YAAM;AAAA,wBACW,MAAKP,KADhB;AAAA,UAClBQ,MADkB,eAClBA,MADkB;AAAA,UACVF,SADU,eACVA,SADU;AAAA,UACCG,KADD,eACCA,KADD;AAAA,UAElBf,IAFkB,GAET,MAAKD,KAFI,CAElBC,IAFkB;AAG1B,aAAO,SAAc;AAAEc,QAAAA,MAAM,EAANA,MAAF;AAAUE,QAAAA,SAAS,EAAEhB,IAAI,GAAG,MAAKW,gBAAL,CAAsBC,SAAtB,CAAH,GAAsCK;AAA/D,OAAd,EAA0FF,KAA1F,CAAP;AACH,KAJD,CAnCU,CAwCV;;;AACA,UAAKG,UAAL,GAAkB,YAAM;AAAA,yBACiC,MAAKZ,KADtC;AAAA,UACZa,SADY,gBACZA,SADY;AAAA,UACDP,SADC,gBACDA,SADC;AAAA,UACUQ,SADV,gBACUA,SADV;AAAA,UACqBb,OADrB,gBACqBA,OADrB;;AAEpB,UAAI,MAAKC,YAAL,IAAqB,CAACD,OAA1B,EAAmC;AAC/B,eAAO,IAAP;AACH;;AACD,YAAKC,YAAL,GAAoB,KAApB;AACA,UAAMa,cAAc,GAAGT,SAAS,KAAK,MAAd,IAAwBA,SAAS,KAAK,OAAtC,GACjB;AACEU,QAAAA,QAAQ,EAAE,MADZ;AAEEC,QAAAA,MAAM,EAAE;AAFV,OADiB,GAKjB,EALN;;AAMA,UAAMnB,gBAAgB,GAAG,MAAKC,iBAAL,EAAzB;;AACA,UAAID,gBAAJ,EAAsB;AAClB;AACAiB,QAAAA,cAAc,CAACG,OAAf,GAAyB,CAAzB;AACAH,QAAAA,cAAc,CAACI,UAAf,GAA4B,aAA5B;AACH;;AACD,aAAQ;AAAK,QAAA,SAAS,YAAKL,SAAL,kBAAd;AAA6C,QAAA,KAAK,EAAEC,cAApD;AAAoE,QAAA,eAAe,EAAE,MAAKlB;AAA1F,SACX,MAAKuB,YAAL,EADW,EAEZ;AAAK,QAAA,SAAS,YAAKN,SAAL,UAAd;AAAqC,QAAA,KAAK,EAAED;AAA5C,SACG,MAAKb,KAAL,CAAWqB,QADd,CAFY,CAAR;AAMH,KAxBD,CAzCU,CAkEV;;;AACA,UAAKC,cAAL,GAAsB,UAACC,KAAD,EAAW;AACvB,UAAAC,EAAE,GAAG,MAAKxB,KAAV;AAAA,UAAmBc,SAAnB,GAEwFU,EAFxF,CAAmBV,SAAnB;AAAA,UAA8BN,MAA9B,GAEwFgB,EAFxF,CAA8BhB,MAA9B;AAAA,UAAsCC,KAAtC,GAEwFe,EAFxF,CAAsCf,KAAtC;AAAA,UAA6CH,SAA7C,GAEwFkB,EAFxF,CAA6ClB,SAA7C;AAAA,UAAwDmB,SAAxD,GAEwFD,EAFxF,CAAwDC,SAAxD;AAAA,UAAmEC,aAAnE,GAEwFF,EAFxF,CAAmEE,aAAnE;AAAA,UAAkFC,KAAlF,GAEwFH,EAFxF,CAAkFG,KAAlF;AAAA,UAAyFV,MAAzF,GAEwFO,EAFxF,CAAyFP,MAAzF;AAAA,UAAiGW,QAAjG,GAEwFJ,EAFxF,CAAiGI,QAAjG;AAAA,UAA2GxB,cAA3G,GAEwFoB,EAFxF,CAA2GpB,cAA3G;AAAA,UAA2HyB,IAA3H,GAEwFL,EAFxF,CAA2HK,IAA3H;AAAA,UAAiIhB,SAAjI,GAEwFW,EAFxF,CAAiIX,SAAjI;AAAA,UAA4IiB,KAA5I,GAEwFN,EAFxF,CAA4IM,KAA5I;AAAA,UAAmJpC,IAAnJ,GAEwF8B,EAFxF,CAAmJ9B,IAAnJ;AAAA,UAAyJO,OAAzJ,GAEwFuB,EAFxF,CAAyJvB,OAAzJ;AAAA,UAEN8B,iBAFM,GAEwFP,EAFxF,CAENO,iBAFM;AAAA,UAEaC,aAFb,GAEwFR,EAFxF,CAEaQ,aAFb;AAAA,UAE4BC,YAF5B,GAEwFT,EAFxF,CAE4BS,YAF5B;AAAA,UAE0CC,WAF1C,GAEwFV,EAFxF,CAE0CU,WAF1C;AAAA,UAEuDC,GAFvD,GAEwFX,EAFxF,CAEuDW,GAFvD;AAAA,UAE4DC,uBAF5D,GAEwFZ,EAFxF,CAE4DY,uBAF5D;AAAA,UAE4FC,IAF5F,GAEmG9D,MAAM,CAACiD,EAAD,EAAK,CAAC,WAAD,EAAc,QAAd,EAAwB,OAAxB,EAAiC,WAAjC,EAA8C,WAA9C,EAA2D,eAA3D,EAA4E,OAA5E,EAAqF,QAArF,EAA+F,UAA/F,EAA2G,gBAA3G,EAA6H,MAA7H,EAAqI,WAArI,EAAkJ,OAAlJ,EAA2J,MAA3J,EAAmK,SAAnK,EAA8K,mBAA9K,EAAmM,eAAnM,EAAoN,cAApN,EAAoO,aAApO,EAAmP,KAAnP,EAA0P,yBAA1P,CAAL,CAFzG;;AAGN,+BAAQE,aAAa,KAAKf,SAA1B,EAAqC,QAArC,EAA+C,4DAA/C;AACA,UAAM2B,QAAQ,GAAGT,IAAI,GAAG,EAAH,GAAQ,SAA7B;AACA,YAAKU,YAAL,GAAoBhB,KAApB;AACA,UAAMiB,WAAW,GAAG,EAApB;;AACA,UAAIlC,SAAS,KAAK,MAAd,IAAwBA,SAAS,KAAK,OAA1C,EAAmD;AAC/CkC,QAAAA,WAAW,CAACb,KAAZ,GAAoBA,KAApB;AACH,OAFD,MAGK;AACDa,QAAAA,WAAW,CAACvB,MAAZ,GAAqBA,MAArB;AACH;;AACD,aAAQ,oBAAC,aAAD,CAAe,QAAf;AAAwB,QAAA,KAAK;AAA7B,SACZ,oBAAC,oBAAD;AAAU,QAAA,OAAO,EAAE;AAAnB,SAA8BoB,IAA9B,EAAwCG,WAAxC;AAAqD,QAAA,SAAS,EAAE1B,SAAhE;AAA2E,QAAA,IAAI,EAAE,MAAKd,KAAL,CAAWC,OAA5F;AAAqG,QAAA,QAAQ,EAAE4B,IAA/G;AAAqH,QAAA,SAAS,EAAEvB,SAAhI;AAA2I,QAAA,KAAK,EAAE,MAAKC,gBAAL,EAAlJ;AAA2K,QAAA,SAAS,EAAE,4BAAWmB,aAAX,EAA0BD,SAA1B,EAAqCa,QAArC;AAAtL,UACG,MAAK1B,UAAL,EADH,CADY,CAAR;AAKH,KAnBD;;AAnEU;AAuFb;;;;wCACmB;AAChB;AACA;AAFgB,UAGRX,OAHQ,GAGI,KAAKD,KAHT,CAGRC,OAHQ;;AAIhB,UAAIA,OAAO,IAAI,KAAKsC,YAApB,EAAkC;AAC9B,aAAKA,YAAL,CAAkB7C,IAAlB;AACH;AACJ;;;uCACkB+C,Q,EAAU;AAAA,UACjBxC,OADiB,GACL,KAAKD,KADA,CACjBC,OADiB;;AAEzB,UAAIwC,QAAQ,CAACxC,OAAT,KAAqBA,OAArB,IAAgC,KAAKsC,YAAzC,EAAuD;AACnD,YAAItC,OAAJ,EAAa;AACT,eAAKsC,YAAL,CAAkB7C,IAAlB;AACH,SAFD,MAGK;AACD,eAAK6C,YAAL,CAAkB3C,IAAlB;AACH;AACJ;AACJ;;;2CACsB;AACnB;AACA,UAAI,KAAK2C,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkB3C,IAAlB;AACA,aAAK2C,YAAL,GAAoB,IAApB;AACH;AACJ;;;mCACc;AAAA,yBAC4B,KAAKvC,KADjC;AAAA,UACH8B,KADG,gBACHA,KADG;AAAA,UACIhB,SADJ,gBACIA,SADJ;AAAA,UACec,QADf,gBACeA,QADf;;AAEX,UAAI,CAACE,KAAD,IAAU,CAACF,QAAf,EAAyB;AACrB,eAAO,IAAP;AACH;;AACD,UAAMc,eAAe,GAAGZ,KAAK,aAAMhB,SAAN,yBAA8BA,SAA9B,qBAA7B;AACA,aAAQ;AAAK,QAAA,SAAS,EAAE4B;AAAhB,SACPZ,KAAK,IAAI;AAAK,QAAA,SAAS,YAAKhB,SAAL;AAAd,SAAuCgB,KAAvC,CADF,EAEPF,QAAQ,IAAI,KAAKe,eAAL,EAFL,CAAR;AAIH;;;sCACiB;AAAA,yBAC2B,KAAK3C,KADhC;AAAA,UACN4B,QADM,gBACNA,QADM;AAAA,UACId,SADJ,gBACIA,SADJ;AAAA,UACe8B,OADf,gBACeA,OADf;AAEd,aAAQhB,QAAQ,IAAK;AAAQ,QAAA,OAAO,EAAEgB,OAAjB;AAA0B,sBAAW,OAArC;AAA6C,QAAA,SAAS,YAAK9B,SAAL;AAAtD,SACnB,oBAAC,gBAAD;AAAM,QAAA,IAAI,EAAC;AAAX,QADmB,CAArB;AAGH;;;6BACQ;AACL,aAAO,oBAAC,aAAD,CAAe,QAAf,QAAyB,KAAKQ,cAA9B,CAAP;AACH;;;;EAtIgBuB,KAAK,CAACC,S;;AAwI3BvD,MAAM,CAACwD,YAAP,GAAsB;AAClBpB,EAAAA,KAAK,EAAE,GADW;AAElBV,EAAAA,MAAM,EAAE,GAFU;AAGlBW,EAAAA,QAAQ,EAAE,IAHQ;AAIlBtB,EAAAA,SAAS,EAAE,OAJO;AAKlB0C,EAAAA,YAAY,EAAE,IALI;AAMlBnB,EAAAA,IAAI,EAAE,IANY;AAOlBoB,EAAAA,KAAK,EAAE,IAPW;AAQlBC,EAAAA,QAAQ,EAAE;AARQ,CAAtB;;eAUe,wCAAmB;AAC9BpC,EAAAA,SAAS,EAAE;AADmB,CAAnB,EAEZvB,MAFY,C","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport RcDrawer from 'rc-drawer';\nimport createReactContext from '@ant-design/create-react-context';\nimport warning from '../_util/warning';\nimport classNames from 'classnames';\nimport Icon from '../icon';\nimport { withConfigConsumer } from '../config-provider';\nimport { tuple } from '../_util/type';\nconst DrawerContext = createReactContext(null);\nconst PlacementTypes = tuple('top', 'right', 'bottom', 'left');\nclass Drawer extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            push: false,\n        };\n        this.push = () => {\n            this.setState({\n                push: true,\n            });\n        };\n        this.pull = () => {\n            this.setState({\n                push: false,\n            });\n        };\n        this.onDestroyTransitionEnd = () => {\n            const isDestroyOnClose = this.getDestroyOnClose();\n            if (!isDestroyOnClose) {\n                return;\n            }\n            if (!this.props.visible) {\n                this.destroyClose = true;\n                this.forceUpdate();\n            }\n        };\n        this.getDestroyOnClose = () => this.props.destroyOnClose && !this.props.visible;\n        // get drawer push width or height\n        this.getPushTransform = (placement) => {\n            if (placement === 'left' || placement === 'right') {\n                return `translateX(${placement === 'left' ? 180 : -180}px)`;\n            }\n            if (placement === 'top' || placement === 'bottom') {\n                return `translateY(${placement === 'top' ? 180 : -180}px)`;\n            }\n        };\n        this.getRcDrawerStyle = () => {\n            const { zIndex, placement, style } = this.props;\n            const { push } = this.state;\n            return Object.assign({ zIndex, transform: push ? this.getPushTransform(placement) : undefined }, style);\n        };\n        // render drawer body dom\n        this.renderBody = () => {\n            const { bodyStyle, placement, prefixCls, visible } = this.props;\n            if (this.destroyClose && !visible) {\n                return null;\n            }\n            this.destroyClose = false;\n            const containerStyle = placement === 'left' || placement === 'right'\n                ? {\n                    overflow: 'auto',\n                    height: '100%',\n                }\n                : {};\n            const isDestroyOnClose = this.getDestroyOnClose();\n            if (isDestroyOnClose) {\n                // Increase the opacity transition, delete children after closing.\n                containerStyle.opacity = 0;\n                containerStyle.transition = 'opacity .3s';\n            }\n            return (<div className={`${prefixCls}-wrapper-body`} style={containerStyle} onTransitionEnd={this.onDestroyTransitionEnd}>\n        {this.renderHeader()}\n        <div className={`${prefixCls}-body`} style={bodyStyle}>\n          {this.props.children}\n        </div>\n      </div>);\n        };\n        // render Provider for Multi-level drawer\n        this.renderProvider = (value) => {\n            const _a = this.props, { prefixCls, zIndex, style, placement, className, wrapClassName, width, height, closable, destroyOnClose, mask, bodyStyle, title, push, visible, \n            // ConfigConsumerProps\n            getPopupContainer, rootPrefixCls, getPrefixCls, renderEmpty, csp, autoInsertSpaceInButton } = _a, rest = __rest(_a, [\"prefixCls\", \"zIndex\", \"style\", \"placement\", \"className\", \"wrapClassName\", \"width\", \"height\", \"closable\", \"destroyOnClose\", \"mask\", \"bodyStyle\", \"title\", \"push\", \"visible\", \"getPopupContainer\", \"rootPrefixCls\", \"getPrefixCls\", \"renderEmpty\", \"csp\", \"autoInsertSpaceInButton\"]);\n            warning(wrapClassName === undefined, 'Drawer', 'wrapClassName is deprecated, please use className instead.');\n            const haveMask = mask ? '' : 'no-mask';\n            this.parentDrawer = value;\n            const offsetStyle = {};\n            if (placement === 'left' || placement === 'right') {\n                offsetStyle.width = width;\n            }\n            else {\n                offsetStyle.height = height;\n            }\n            return (<DrawerContext.Provider value={this}>\n        <RcDrawer handler={false} {...rest} {...offsetStyle} prefixCls={prefixCls} open={this.props.visible} showMask={mask} placement={placement} style={this.getRcDrawerStyle()} className={classNames(wrapClassName, className, haveMask)}>\n          {this.renderBody()}\n        </RcDrawer>\n      </DrawerContext.Provider>);\n        };\n    }\n    componentDidMount() {\n        // fix: delete drawer in child and re-render, no push started.\n        // <Drawer>{show && <Drawer />}</Drawer>\n        const { visible } = this.props;\n        if (visible && this.parentDrawer) {\n            this.parentDrawer.push();\n        }\n    }\n    componentDidUpdate(preProps) {\n        const { visible } = this.props;\n        if (preProps.visible !== visible && this.parentDrawer) {\n            if (visible) {\n                this.parentDrawer.push();\n            }\n            else {\n                this.parentDrawer.pull();\n            }\n        }\n    }\n    componentWillUnmount() {\n        // unmount drawer in child, clear push.\n        if (this.parentDrawer) {\n            this.parentDrawer.pull();\n            this.parentDrawer = null;\n        }\n    }\n    renderHeader() {\n        const { title, prefixCls, closable } = this.props;\n        if (!title && !closable) {\n            return null;\n        }\n        const headerClassName = title ? `${prefixCls}-header` : `${prefixCls}-header-no-title`;\n        return (<div className={headerClassName}>\n        {title && <div className={`${prefixCls}-title`}>{title}</div>}\n        {closable && this.renderCloseIcon()}\n      </div>);\n    }\n    renderCloseIcon() {\n        const { closable, prefixCls, onClose } = this.props;\n        return (closable && (<button onClick={onClose} aria-label=\"Close\" className={`${prefixCls}-close`}>\n          <Icon type=\"close\"/>\n        </button>));\n    }\n    render() {\n        return <DrawerContext.Consumer>{this.renderProvider}</DrawerContext.Consumer>;\n    }\n}\nDrawer.defaultProps = {\n    width: 256,\n    height: 256,\n    closable: true,\n    placement: 'right',\n    maskClosable: true,\n    mask: true,\n    level: null,\n    keyboard: true,\n};\nexport default withConfigConsumer({\n    prefixCls: 'drawer',\n})(Drawer);\n"],"file":"index.js"}